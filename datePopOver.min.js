!function(e){e.fn.datePopOver=function(t){t||(t={}),this.opts=t;var a=this;return this.changeMonthYear=function(t){var o=e(t).closest('div[class^="popover-content"]'),l=o.find("input"),r=e(t).val(),n=parseInt(l.val());if(0/0==n)return a;var s=e(a.selector).attr("localeCode");return a.loadDefaultLocales().loadDefaultValues(),a.localeCode=s,a.locale=a.getLocale(a.localeCode),console.log(a.locale),n-=a.locale.yearCompare,a.now=new Date(n,r,1),a.thisMonth=a.now.getMonth()+1,a.endWeek=a.thisMonth*a.totalWeek,a.startWeek=a.thisMonth*a.totalWeek-a.totalWeek+1,a.firstDate=new Date(a.now.getFullYear(),a.now.getMonth(),1),a.firstDay=a.firstDate.getDay(),a.getTemplate().loadCalendar().loadMonths().loadYear(),e(a.selector).data("bs.popover")&&(e(a.selector).data("bs.popover").options.content=a.$calendar),e(a.selector).popover("show"),e(a.selector).attr("localeCode",a.localeCode),a},this.getDate=function(){var t=e(a.selector).val(),o=e(a.selector).attr("timeVal"),l=e(a.selector).attr("dateFormat"),r=null;if(void 0==t.length&&void 0==o.length)return r;if(void 0==l)return r;if(t.length==l.length){var n=t.substr(l.indexOf("dd"),2),s=t.substr(l.indexOf("MM"),2),c=t.substr(l.indexOf("yyyy"),4);r=new Date(parseInt(c)-a.locale.yearCompare,parseInt(s)-1,parseInt(n))}else o&&(r=new Date(parseInt(o)));return r},this.setDate=function(t){var o=new Date(t),l=a.locale.format,r=o.getDate(),n=o.getMonth()+1,s=o.getFullYear()+a.locale.yearCompare;l=l.replace("dd",1==r.toString().length?"0"+r:r),l=l.replace("MM",1==n.toString().length?"0"+n:n),l=l.replace("yyyy",s),e(a.selector).val(l)},this.getLocale=function(e){for(var t=0;t<a.locales.length;t++)if(a.locales[t].code===e)return a.locales[t]},this.loadDefaultLocales=function(){return a.locales=[{code:"en-US",yearCompare:0,dayShorts:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","Febuary","March","April","May","June","July","August","September","October","November","December"],format:"MM/dd/yyyy"},{code:"th-TH",yearCompare:543,dayShorts:["อา","จ","อ","พ","พฤ","ศ","ส"],monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],format:"dd/MM/yyyy"}],a},this.loadDefaultValues=function(){return a.now=void 0===a.opts.defaultDate||!a.opts.defaultDate instanceof Date?new Date:a.opts.defaultDate,a.totalWeek=void 0===a.opts.totalWeek||"number"!=typeof a.opts.totalWeek?6:a.opts.totalWeek,a.thisMonth=a.now.getMonth()+1,a.endWeek=a.thisMonth*a.totalWeek,a.startWeek=a.thisMonth*a.totalWeek-a.totalWeek+1,a.firstDate=new Date(a.now.getFullYear(),a.now.getMonth(),1),a.firstDay=a.firstDate.getDay(),a.localeCode=void 0===a.opts.locale?a.locales[0].code:a.opts.locale,a.locale=a.getLocale(a.localeCode),e(a.selector).attr("localeCode",a.localeCode),a},this.loadHeader=function(){var e=a.locale,t='<thead><tr><th colspan="7">';return t+='<form class="form-inline">				  <div class="form-group" style="margin-left:5px">				    <select class="form-control" style="width:60%" onchange="datePopOver.changeMonthYear(this,\'{0}\')" >				  </div>				  <div class="form-group" >				    <input type="text" class="form-control" style="width:30%" maxlength="4"/>				  </div>				</form></th></tr>',t=t.replace("{0}",a.selector),t+="<tr>",e.dayShorts.forEach(function(e){t+="<th>"+e+"</th>"}),t+="</tr></thead>",a.template=t,a},this.loadDates=function(){var e=0;a.template+="<tbody><tr>",a.firstDate.setDate(-1*a.firstDay);for(var t=0;t<7*a.totalWeek;t++){t%7==0&&(e++,a.template+="</tr><tr>");var o=new Date(a.firstDate.setDate(a.firstDate.getDate()+1)),l=" onclick=\"datePopOver.selectedDate(this,'"+a.selector+"','"+a.locale.format+"','"+a.locale.yearCompare+"')\"";if(o.getMonth()==a.now.getMonth()){a.template+='<td style="cursor:pointer">';var r=new Date;a.template+=o.getDate()==r.getDate()&&o.getMonth()==r.getMonth()?'<span class="badge" timeVal="'+o.getTime()+'"'+l+">"+o.getDate()+"</span></td>":'<span timeVal="'+o.getTime()+'"'+l+">"+o.getDate()+"</span></td>"}else a.template+='<td style="background:orange;cursor:pointer">',a.template+='<span timeVal="'+o.getTime()+'"'+l+">"+o.getDate()+"</span></td>"}return a.template+="</tr></tbody>",a},this.getTemplate=function(){return a.loadHeader().loadDates(),a.template='<table class="table">'+a.template+"</table>",a},this.loadMonths=function(){var t=a.$calendar.find("select");return e.each(a.locale.monthNames,function(o,l){var r=e("<option>",{value:o,text:l});t.append(r),a.now.getMonth()==o&&r.attr("selected","selected")}),a},this.loadCalendar=function(){return a.$calendar=e(a.template),a},this.loadYear=function(){var e=a.$calendar.find("input"),t=a.now.getFullYear()+parseInt(a.locale.yearCompare);return e.attr("value",t),e.attr("onkeypress","return datePopOver.onlyInteger(event)"),a},this.loadPopOver=function(){var t=e(a.selector);return t.attr("data-toggle","popover"),t.attr("data-placement","bottom"),t.popover({html:!0,content:function(){return a.$calendar.html()}}),a},this.init=function(){return a.loadDefaultLocales().loadDefaultValues().getTemplate().loadCalendar().loadPopOver().loadMonths().loadYear(),a},t.changeMonthYear||this.init(),this}}(jQuery);var datePopOver={onlyInteger:function(e){var t=window.event?e.keyCode:e.which;return 8==e.keyCode||46==e.keyCode||37==e.keyCode||39==e.keyCode||13==e.keyCode||9==e.keyCode?!0:48>t||t>57?!1:!0},selectedDate:function(e,t,a,o){var l=$(e).closest('div[class^="popover-content"]');l.find("span").each(function(){$(this).hasClass("label label-primary")&&$(this).removeClass("label label-primary")}),$(e).addClass("label label-primary");var r=new Date(parseInt($(e).attr("timeVal"))),n=r.getFullYear()+parseInt(o),s=r.getDate();s=s.toString().length<2?"0"+s:s;var c=r.getMonth()+1;c=c.toString().length<2?"0"+c:c;var i=a.replace("dd",s).replace("MM",c).replace("yyyy",n);$(t).val(i),$(t).attr("timeVal",$(e).attr("timeVal")),$(t).attr("dateFormat",a),$(t).popover("hide")},changeMonthYear:function(e,t){$(t).datePopOver({changeMonthYear:!0}).changeMonthYear(e)}};